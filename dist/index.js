!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("prop-types"),require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["prop-types","react","react-dom"],e):"object"==typeof exports?exports["react-parallax"]=e(require("prop-types"),require("react"),require("react-dom")):t["react-parallax"]=e(t.PropTypes,t.React,t.ReactDOM)}(this,function(t,e,n){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=5)}([function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(0),u=i(l),c=n(1),d=i(c),h=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"isParallaxBackground",value:function(){return!0}},{key:"render",value:function(){return d.default.createElement("div",{className:"react-parallax-background "+this.props.className},this.props.children)}}]),e}(d.default.Component);h.propTypes={children:u.default.node,className:u.default.string},h.defaultProps={className:""},e.default=h},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(0),u=i(l),c=n(1),d=i(c),h=n(6),p=i(h),f=n(4),g=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={bgImage:t.bgImage,childStyle:{position:"relative"}},n.canUseDOM=(0,f.canUseDOM)(),n.ReactDOM=p.default.findDOMNode?p.default:d.default,n.node=null,n.content=null,n.splitChildren=n.getSplitChildren(t),n.bgImageLoaded=!1,n.parent=t.parent,n.parentHeight=(0,f.getNodeHeight)(n.canUseDOM,n.parent),n.timestamp=Date.now(),n.dynamicBlur=!(!t.blur||void 0===t.blur.min||void 0===t.blur.max),n.autobind(),n}return a(e,t),s(e,[{key:"componentDidMount",value:function(){var t=this.props.parent;this.parent=t||document,this.addListeners(this.props),this.node=this.ReactDOM.findDOMNode(this),this.img=this.refs.bgImage?this.ReactDOM.findDOMNode(this.refs.bgImage):null,this.state.bgImage?this.loadImage(this.state.bgImage):this.updatePosition(),this.setParallaxStyle(),this.setInitialBackgroundStyles(this.img),this.setInitialBackgroundStyles(this.bg)}},{key:"componentWillReceiveProps",value:function(t){this.splitChildren=this.getSplitChildren(t),t.parent&&this.parent!==t.parent&&(this.parent=t.parent,this.removeListeners(),this.addListeners()),this.parentHeight=(0,f.getNodeHeight)(this.canUseDOM,this.parent),this.state.bgImage!==t.bgImage&&this.loadImage(t.bgImage)}},{key:"shouldComponentUpdate",value:function(t,e){return t.bgImage===this.props.bgImage||e.bgImage!==this.state.bgImage}},{key:"componentWillUnmount",value:function(){this.removeListeners(this.parent)}},{key:"autobind",value:function(){this.onScroll=this.onScroll.bind(this),this.onWindowResize=this.onWindowResize.bind(this),this.updatePosition=this.updatePosition.bind(this),this.onWindowLoad=this.onWindowLoad.bind(this)}},{key:"addListeners",value:function(){this.canUseDOM&&this.parent&&(this.parent.addEventListener("scroll",this.onScroll,!1),window.addEventListener("resize",this.onWindowResize,!1),window.addEventListener("load",this.onWindowLoad,!1))}},{key:"removeListeners",value:function(){this.canUseDOM&&this.parent&&(this.parent.removeEventListener("scroll",this.onScroll,!1),window.removeEventListener("resize",this.onWindowResize,!1),window.removeEventListener("load",this.onWindowLoad,!1))}},{key:"loadImage",value:function(t){var e=this,n=new Image;n.onload=n.onerror=function(n){e.setState({bgImage:t},function(){return e.updatePosition()})},n.src=t}},{key:"bgMounted",value:function(t){this.bg=this.ReactDOM.findDOMNode(t)}},{key:"onScroll",value:function(t){if(this.canUseDOM){var e=Date.now();e-this.timestamp>=10&&(window.requestAnimationFrame(this.updatePosition),this.timestamp=e)}}},{key:"onWindowLoad",value:function(){this.updatePosition()}},{key:"getSplitChildren",value:function(t){var e=[],n=d.default.Children.toArray(t.children);return n.forEach(function(t,i){t.type&&t.type.prototype&&t.type.prototype.isParallaxBackground&&(e=e.concat(n.splice(i,1)))}),{bgChildren:e,children:n}}},{key:"updatePosition",value:function(){var t=!1;if(this.content=this.ReactDOM.findDOMNode(this.refs.content),this.content){this.contentHeight=this.content.getBoundingClientRect().height,this.contentWidth=this.node.getBoundingClientRect().width,this.img&&this.img.naturalWidth/this.img.naturalHeight<this.contentWidth/this.getImageHeight()&&(t=!0);var e=(0,f.getRelativePosition)(this.node,this.canUseDOM,this.parent);this.img&&this.setImagePosition(e,t),this.bg&&this.splitChildren.bgChildren.length>0&&this.setBackgroundPosition(e)}}},{key:"getImageHeight",value:function(){var t=this.props.strength<0;return Math.floor(this.contentHeight+(t?2.5:1)*Math.abs(this.props.strength))}},{key:"setImagePosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.props,i=n.bgHeight,r=n.bgWidth,o=n.disabled,a=(n.strength,n.blur),s=i||(e?"auto":this.getImageHeight()+"px"),l=r||(e?this.contentWidth+"px":"auto");if(this.img.style.height=s,this.img.style.width=l,!0!==o){var u=this.backgroundPosition(t);if(this.img.style.WebkitTransform="translate3d(-50%, "+u+"px, 0)",this.img.style.transform="translate3d(-50%, "+u+"px, 0)",a){var c=this.dynamicBlur?a.min+(1-t)*a.max:a;this.setBlur(this.img,c)}}}},{key:"setBlur",value:function(t,e){t.style.WebkitFilter="blur("+e+"px)",t.style.filter="blur("+e+"px)"}},{key:"setBackgroundPosition",value:function(t){var e=this.props,n=e.disabled;if(e.strength,!0!==n){var i=this.backgroundPosition(t);this.bg.style.WebkitTransform="translate3d(-50%, "+i+"px, 0)",this.bg.style.transform="translate3d(-50%, "+i+"px, 0)"}}},{key:"backgroundPosition",value:function(t){var e=this.props,n=e.bgPosition,i=e.strength;return"function"==typeof n?n(t,this.props):(i<0?i:0)-i*t}},{key:"setInitialBackgroundStyles",value:function(t){var e=this;t&&(t.style.position="absolute",t.style.left="50%",t.style.WebkitTransform="translate3d(-50%, 0, 0)",t.style.transform="translate3d(-50%, 0, 0)",t.style.WebkitTransformStyle="preserve-3d",t.style.WebkitBackfaceVisibility="hidden",t.style.MozBackfaceVisibility="hidden",t.style.MsBackfaceVisibility="hidden",this.props.bgStyle&&Object.keys(this.props.bgStyle).forEach(function(n){t.style[n]=e.props.bgStyle[n]}))}},{key:"onWindowResize",value:function(){this.parentHeight=(0,f.getNodeHeight)(this.canUseDOM,this.parent),this.updatePosition()}},{key:"setParallaxStyle",value:function(){this.node&&(this.node.style.position="relative",this.node.style.overflow="hidden")}},{key:"log",value:function(){if(this.props.log){var t;(t=console).log.apply(t,arguments)}}},{key:"render",value:function(){var t=this;return d.default.createElement("div",{className:"react-parallax "+this.props.className},this.state.bgImage?d.default.createElement("img",{className:this.props.bgClassName,src:this.state.bgImage,ref:"bgImage",alt:this.props.bgImageAlt}):null,this.splitChildren.bgChildren.length>0?d.default.createElement("div",{className:"react-parallax-background-children",ref:function(e){return t.bgMounted(e)}},this.splitChildren.bgChildren):null,d.default.createElement("div",{className:"react-parallax-content",style:this.state.childStyle,ref:"content"},this.splitChildren.children))}}]),e}(d.default.Component);g.propTypes={bgClassName:u.default.string,bgHeight:u.default.string,bgImage:u.default.string,bgImageAlt:u.default.string,bgStyle:u.default.object,bgWidth:u.default.string,blur:u.default.oneOfType([u.default.number,u.default.object]),bgPosition:u.default.func,className:u.default.string,parent:u.default.any,strength:u.default.number},g.defaultProps={bgClassName:"react-parallax-bgimage",bgImageAlt:"",className:"",disabled:!1,log:!1,strength:100},e.default=g},function(t,e,n){"use strict";function i(t,e){if(!e)return!1;var n=t.getBoundingClientRect().top,i=t.getBoundingClientRect().bottom;return n<=0&&i>=0||n>=0&&i<=window.innerHeight||n<=window.innerHeight&&i>=window.innerHeight}function r(t){if(!t)return 0;var e=window,n=document,i=n.documentElement,r=n.getElementsByTagName("body")[0];return e.innerHeight||i.clientHeight||r.clientHeight}function o(t,e){return t?e?e.clientHeight:r(t):0}function a(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}function s(t,e,n){if(!e)return 0;var i=t,r=Math.round(i.getBoundingClientRect().top),a=o(e);return r=r>a?a:r,l(0,a,r)}function l(t,e,n){return(n-t)/(e-t)}function u(t,e,n,i){if(i)switch(e.property){case"blur":t.style.filter="blur("+n+(e.unit||"px")+")"}}Object.defineProperty(e,"__esModule",{value:!0}),e.isScrolledIntoView=i,e.getWindowHeight=r,e.getNodeHeight=o,e.canUseDOM=a,e.getRelativePosition=s,e.getPercentage=l,e.setStyleProp=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Background=e.Parallax=void 0;var r=n(3),o=i(r),a=n(2),s=i(a);e.Parallax=o.default,e.Background=s.default},function(t,e){t.exports=n}])});